# template-no-delete.tsx ベースアプリケーション作成仕様書

**📅 最終更新**: 2025年11月11日  
**ステータス**: ✅ Production Ready (Tests: 106/106, GitHub Pages: Live)  
**デプロイURL**: https://j1921604.github.io/ToDo/  
**GitHubリポジトリ**: https://github.com/J1921604/ToDo

## 🚀 ワンコマンド起動

Windows環境では `start.ps1` でワンコマンド起動が可能です：

```powershell
.\start.ps1
```

**動作内容**:
1. 依存関係の自動インストール（未インストール時）
2. 開発サーバーをバックグラウンドで起動（デタッチプロセス）
3. サーバー起動確認（最大30秒待機）
4. ブラウザで http://localhost:1234 を自動的に開く
5. PowerShellウィンドウが5秒後に自動終了

**注意**: 
- サーバーはバックグラウンドで実行を継続します。停止するには `taskkill /F /IM node.exe` を実行してください。
- `start-simple.ps1`は削除されました。`start.ps1`をご利用ください。

## 📋 目次
1. [プロジェクト概要](#プロジェクト概要)
2. [前提条件](#前提条件)
3. [学習レベル別ガイド](#学習レベル別ガイド)
4. [技術スタック](#技術スタック)
5. [ファイル構造](#ファイル構造)
6. [コアコンポーネント仕様](#コアコンポーネント仕様)
7. [テンプレートファイル詳細仕様](#テンプレートファイル詳細仕様)
8. [アプリケーション作成手順](#アプリケーション作成手順)
9. [データ構造仕様](#データ構造仕様)
10. [UIコンポーネントライブラリ](#UIコンポーネントライブラリ)
11. [状態管理仕様](#状態管理仕様)
12. [機能実装ガイド](#機能実装ガイド)
13. [トラブルシューティング](#トラブルシューティング)

---

## プロジェクト概要

### プロジェクト名
**training-trn-fp** - React フロントエンド + バックエンドAPI トレーニングプロジェクト

### プロジェクトの目的
- React + TypeScript による SPA 開発の学習
- Todo アプリケーションを通じた実践的なフロントエンド開発スキルの習得
- `template-no-delete.tsx` をベースにした個人用 Todo アプリの作成練習
- 配列操作・状態管理・条件レンダリングの実践

### プロジェクトの特徴
- **教育目的**: 新人開発者の実践的なトレーニング用
- **削除機能なしテンプレート**: 意図的に削除機能を省略し、学習者が実装
- **フルスタック構成**: フロントエンド + REST API + SQLite データベース
- **個人カスタマイズ可能**: 各開発者が独自の Todo アプリを作成可能
- **レベル別学習**: 初級（基礎）から中級（実装）まで段階的な学習

### 参考リンク
- **Azure DevOps Wiki**: https://dev.azure.com/JERA-Organization/TRN-FP/_wiki/wikis/TRN-FP.wiki/19489/React開発研修（Todoアプリ改造）_React初心者向け

---

## 前提条件

### 必要な知識
- **React基礎知識**: コンポーネント、Props、State の理解
- **TypeScript基礎**: 型定義、インターフェースの基本理解
- **JavaScript ES6+**: アロー関数、分割代入、スプレッド構文など

### 環境準備
以下の環境セットアップが完了していること：

1. **Node.js & npm** インストール済み
2. **開発環境の準備** 完了
   - 参考: [開発環境を準備する](https://dev.azure.com/JERA-Organization/TRN-FP/_wiki/wikis/TRN-FP.wiki/2000/開発環境を準備する-Prepare-the-dev-environment)
3. **プロジェクトの依存関係** インストール済み
   ```powershell
   npm install
   ```

### 確認方法
```powershell
# Node.jsバージョン確認
node --version

# npmバージョン確認
npm --version

# プロジェクト起動確認
npm run dev
```

---

## 学習レベル別ガイド

### 🎓 初級レベル（React基礎レベル）

#### 対象者
- React基礎知識がある人
- コンポーネント、Props、State の概念を理解している人
- 初めてReactプロジェクトを触る人

#### 学習目的
- **コピー & ペーストで自分用のTodoページを作成する**
- **サイドバーからページを開けるようにする**
- React プロジェクトの基本的な構造を理解する

#### 実装手順（初級）

##### ステップ1: サイドバーから新規ページを追加

1. **開発サーバーを起動**
```powershell
npm run dev
```

2. **ブラウザでアプリを開く**
   - http://localhost:1234/ にアクセス

3. **サイドバーの「➕ 新規ページ追加」ボタンをクリック**
   - 名前を入力（例: Tanaka）
   - アイコンを入力（例: 📝）
   - 「追加」ボタンをクリック

4. **開発サーバーを再起動**
```powershell
# Ctrl+C でサーバーを停止
npm run dev
```

5. **サイドバーに新しいページが表示される**
   - クリックして開くとTodoページが表示されます

**注意**: ページ追加後は必ず開発サーバーを再起動してください。

##### ステップ2: ページの使い方

追加したページでは以下のことができます：

**基本機能**
- ✅ タスクの追加
- ✅ タスクの完了/未完了の切り替え
- ✅ タスクの個別削除
- ✅ 完了タスクの一括削除
- ✅ フィルター（すべて/未完了/完了済み）

**データ保存**
- LocalStorageに自動保存されます
- ブラウザを閉じても、データは保持されます

##### ステップ3: ページ削除（必要な場合）

サイドバーの各ページの右側にある🗑️ボタンをクリックすると、ページを削除できます。

**重要**: ページ削除時の動作
- ページ情報が削除されます
- **そのページのタスクデータ（LocalStorage）も完全に削除されます**
- 同じ名前で再度ページを追加しても、以前のタスクは復元されません
- ページ削除後は開発サーバーの再起動が必要です

##### ステップ4: サイドバー追加
`src/components/organisms/サイドバー.tsx` を編集：

```tsx
const サイドバー: React.FC = () => (
  <サイドバー_>
    <サイドバーLink label="ホーム" href="/" />
    <サイドバーLink label="Todo" href="/todos" />
    
    {/* ★ 自分のページリンクを追加 */}
    <サイドバーLink label="📝 山田のタスク管理" href="/yamada-todo" />
  </サイドバー_>
)
```

##### ステップ5: 動作確認

**開発サーバー起動**:
```powershell
npm run dev
```

**確認項目**:
- [ ] サイドバーに自分の名前のリンクが表示される
- [ ] リンクをクリックすると自分のページが開く
- [ ] タスクを入力して「追加」ボタンを押すとタスクが追加される
- [ ] 追加されたタスクの前にある□をクリックすると完了状態に変更できる
- [ ] フィルターボタン（すべて/進行中/完了済み）が動作する
- [ ] 完了済みタグをクリックして、完了したタスク一覧が表示される
- [ ] ページをリロードしてもデータが保持される

#### 期待される成果（初級）
- ✅ サイドバーから自分の名前ページを開ける
- ✅ Todo追加・完了切り替えができる
- ✅ フィルター機能が使える
- ✅ データがLocalStorageに保存される

#### 成果物イメージ（初級）
**サイドバー表示**:
```
┌─────────────────┐
│ 🏠 ホーム       │
│ 📋 Todo         │
│ 📝 山田のタスク管理 │ ← 自分のページ
└─────────────────┘
```

**自分のページ画面**:
```
📝 【山田】のタスク管理

┌────────────────────────────────┐
│ [タスクを入力...] [➕ 追加]    │
└────────────────────────────────┘

フィルター: [すべて(3)] [進行中(2)] [完了済み(1)]

┌────────────────────────────────┐
│ ☐ Reactを学習する  2025/11/06  │
│ ☑ TypeScriptを理解する 2025/11/05 │
│ ☐ アプリを作成する  2025/11/06  │
└────────────────────────────────┘

合計 3 個のタスク、2 個が未完了
```

#### 詳細マニュアル（初級）
より詳しい実装TIPSについては以下を参照：
- `\training-trn-fp\dev-exercises\BASIC_TODO_GUIDE_JP.md`

---

### 🚀 中級レベル（React経験者向け）

#### 対象者
- Reactの基本的な開発経験がある人
- useState、useEffect を理解している人
- 配列操作（map, filter）の経験がある人

#### 学習目的
- **タスク削除機能を実装して、配列操作・状態管理を練習する**
- **条件レンダリングを実践する**
- **ユーザーインターフェースの改善を体験する**

#### 実装内容（中級）

##### 実装1: 個別削除機能

**実装ステップ**:

1. **削除関数の追加**
```tsx
// toggleTodo 関数の後に追加
const deleteTodo = (id: number) => {
  setTodos((prev) => prev.filter((todo) => todo.id !== id))
}
```

2. **UIに削除ボタンを追加**
```tsx
<li key={todo.id} style={{...}}>
  <input type="checkbox" {...} />
  <span>{todo.text}</span>
  <span>{todo.createdAt.toLocaleDateString()}</span>
  
  {/* ★ 削除ボタンを追加 */}
  <Button.Small onClick={() => deleteTodo(todo.id)}>
    🗑️
  </Button.Small>
</li>
```

**実装ポイント**:
- `filter` メソッドで対象タスクを削除
- UIとlocalStorageが即時更新されることを確認
- クリックイベントで正しくIDを渡す

##### 実装2: 一括削除機能

**実装ステップ**:

1. **一括削除関数の追加**
```tsx
// deleteTodo 関数の後に追加
const clearCompleted = () => {
  setTodos((prev) => prev.filter((todo) => !todo.completed))
}
```

2. **UIにクリアボタンを追加**
```tsx
{todos.length > 0 && (
  <div style={{
    marginTop: '20px',
    padding: '15px',
    backgroundColor: '#f8f9fa',
    borderRadius: '6px',
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
  }}>
    <span>合計 {todos.length} 個のタスク、{activeCount} 個が未完了</span>
    
    {/* ★ 完了タスクがある場合のみ表示 */}
    {completedCount > 0 && (
      <Button.Small onClick={clearCompleted}>
        🗑️ 完了済みをクリア ({completedCount})
      </Button.Small>
    )}
  </div>
)}
```

**実装ポイント**:
- 「完了タスクをクリア」ボタンを追加
- 完了済みタスクがある場合のみ表示（条件レンダリング）
- クリックすると完了タスクがすべて削除される
- ボタンに削除される件数を表示

#### 学習ポイント（中級）
- ✅ **Reactの状態管理**: `useState` による配列の更新
- ✅ **配列操作**: `filter` メソッドの実践的な使用
- ✅ **条件レンダリング**: `&&` 演算子による表示制御
- ✅ **LocalStorageとの同期**: useEffect による自動保存
- ✅ **イベントハンドリング**: onClick と引数の受け渡し

#### 期待される成果（中級）
- ✅ 各タスクに削除ボタンが表示される
- ✅ 削除ボタンをクリックすると対象タスクが削除できる
- ✅ 完了タスクを一括削除できる
- ✅ 削除後、UIとLocalStorageが即時更新される
- ✅ ページリロード後も削除が反映されている

#### 成果物イメージ（中級）

**作業前の画面（既にいくつかのタスクが追加されている）**:
```
📝 【山田】のタスク管理

フィルター: [すべて(5)] [進行中(3)] [完了済み(2)]

┌───────────────────────────────────────┐
│ ☐ Reactを学習する  2025/11/06  [🗑️] │ ← ①削除ボタン
│ ☑ TypeScriptを理解する 2025/11/05 [🗑️] │
│ ☐ アプリを作成する  2025/11/06  [🗑️] │
│ ☑ デプロイする    2025/11/04  [🗑️] │
│ ☐ テストを書く    2025/11/06  [🗑️] │
└───────────────────────────────────────┘

合計 5 個のタスク、3 個が未完了
[🗑️ 完了済みをクリア (2)]  ← ②一括削除ボタン（完了タスクがある時のみ表示）
```

**動作確認**:
- ① **削除ボタン**: クリックすると対象タスクが削除される
- ② **完了タスクをクリア**: クリックすると完了したタスクがすべて削除される
- ③ **条件表示**: 完了タスクがない場合、クリアボタンは表示されない

#### 詳細マニュアル（中級）
より詳しい実装TIPSについては以下を参照：
- `\training-trn-fp\dev-exercises\BASIC_TODO_GUIDE_JP.md`

---

### 📊 学習レベル比較表

| 項目 | 初級 | 中級 |
|------|------|------|
| **対象者** | React基礎学習者 | React経験者 |
| **主な作業** | コピー & 設定変更 | 機能実装 |
| **実装内容** | テンプレート活用 | 削除機能追加 |
| **学習時間** | 30-60分 | 60-90分 |
| **難易度** | ⭐⭐ | ⭐⭐⭐⭐ |
| **成果物** | 基本Todoアプリ | 削除機能付きTodoアプリ |

---

---

## 技術スタック

### フロントエンド
```json
{
  "framework": "React 18.2.0",
  "language": "TypeScript 4.9.3",
  "buildTool": "Vite 4.2.0",
  "uiFramework": "UIkit 3.16.10",
  "routing": "React Router DOM 6.10.0",
  "stateManagement": "React Hooks (useState, useEffect)"
}
```

### 主要依存関係
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.10.0",
    "uikit": "^3.16.10",
    "@azure/msal-browser": "^2.34.0",
    "@azure/msal-react": "^1.5.4"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^3.1.0",
    "typescript": "^4.9.3",
    "vite": "^4.2.0"
  }
}
```

### 開発ツール
- **開発サーバー**: Vite (ポート 1234)
- **API サーバー**: Express (ポート 3001)
- **データベース**: SQLite + DBeaver
- **API テスト**: Postman

---

## ファイル構造

### プロジェクト全体構造
```
ToDo/
├── src/                              # React フロントエンドソース
│   ├── App.tsx                       # メインアプリケーションコンポーネント
│   ├── main.tsx                      # エントリーポイント
│   ├── index.css                     # グローバルスタイル
│   ├── pages/                        # ページコンポーネント
│   │   ├── HomePage.tsx              # ホームページ
│   │   ├── TestUserTodo.tsx          # TestUserのTodoページ
│   │   └── DynamicTodoPage.tsx       # 動的に生成されるTodoページ
│   ├── components/                   # 再利用可能コンポーネント
│   │   ├── atoms/                    # 最小単位コンポーネント
│   │   │   ├── Button/
│   │   │   │   ├── index.tsx
│   │   │   │   ├── Small.tsx
│   │   │   │   └── Middle.tsx
│   │   │   └── Input/
│   │   │       ├── index.tsx
│   │   │       └── Text.tsx
│   │   └── organisms/                # 大規模コンポーネント
│   │       └── Sidebar.tsx           # サイドバー（ページ管理機能付き）
│   ├── config/                       # 設定ファイル
│   │   └── userPages.ts              # ユーザーページ設定（追加・削除・編集）
│   ├── types/                        # TypeScript型定義
│   │   └── todo.ts                   # Todo型定義
│   └── utils/                        # ユーティリティ関数
│       ├── localStorage.ts           # LocalStorage操作
│       └── performance.ts            # パフォーマンス測定
├── tests/                            # テストファイル
│   ├── unit/                         # ユニットテスト
│   │   └── components/
│   └── integration/                  # 統合テスト
├── template-no-delete.tsx            # ★ メインテンプレート (削除機能なし)
├── BASIC_TODO_GUIDE_JP.md            # 日本語実装ガイド
├── React開発研修.md                   # 研修ガイド
├── 仕様書.md                          # プロジェクト仕様書（このファイル）
├── package.json                      # NPM依存関係定義
├── tsconfig.json                     # TypeScript設定
├── vite.config.ts                    # Vite設定
├── vitest.config.ts                  # Vitest設定
└── index.html                        # HTML エントリーポイント
```

---

## コアコンポーネント仕様

### 1. App.tsx - メインアプリケーション
```tsx
// 役割: アプリケーション全体の構造を定義
// 機能: Header, Routing, ToastProvider の統合

import React from 'react'
import { Header } from './components/organisms/Header'
import { Divider } from './components/atoms/Divider'
import { ToastProvider } from './hooks/UI/ToastProvider'
import Routing from './routes'

const App: React.FC = () => {
  return (
    <ToastProvider>
      <Header />
      <Divider.Simple />
      <Routing />
    </ToastProvider>
  )
}

export { App }
```

**仕様ポイント**:
- ToastProvider でトースト通知機能を提供
- Header で共通ヘッダー・サイドバーを表示
- Routing でページルーティングを管理

### 2. main.tsx - エントリーポイント
```tsx
// 役割: React アプリケーションの起動
// 機能: UIkit初期化、MSAL認証、ルーティング設定

import React from 'react'
import UIkit from 'uikit'
import Icons from 'uikit/dist/js/uikit-icons'
import 'uikit/dist/css/uikit.min.css'
import * as ReactDOM from 'react-dom/client'
import { App } from './App'
import { msalConfig } from './authConfig'
import { Protected } from './components/organisms/Protected'
import { BrowserRouter } from 'react-router-dom'

UIkit.use(Icons)

const container = document.getElementById('root')
if (container === null) throw new Error('Root container is missing')

const root = ReactDOM.createRoot(container)

root.render(
  <React.StrictMode>
    <BrowserRouter>
      <Protected config={msalConfig}>
        <App />
      </Protected>
    </BrowserRouter>
  </React.StrictMode>
)
```

**仕様ポイント**:
- UIkit アイコンライブラリの初期化
- Azure MSAL 認証の統合 (Protected コンポーネント)
- React Router による SPA ルーティング

### 3. routes/index.tsx - ルーティング定義
```tsx
// 役割: アプリケーション全体のルート定義
// 機能: URL パスとコンポーネントのマッピング

import React from 'react'
import { Route, Routes } from 'react-router-dom'
import Pages from '../pages'
import FrontendTodoPage from '../pages/FrontendTodo'
import { NotFound } from '../pages/NotFound'
import TakashimaPage from '../pages/KaitoTakashimaTodo'

const Routing = () => {
  return (
    <Routes>
      <Route path="/" Component={Pages.Top}></Route>
      <Route path="/todos" Component={Pages.Todo.List}></Route>
      <Route path="/todos/create" Component={Pages.Todo.Create}></Route>
      <Route path="/todos/edit/:taskId" Component={Pages.Todo.Edit}></Route>
      <Route path="/frontend-todo" Component={FrontendTodoPage}></Route>
      <Route path="/takashima-todo" Component={TakashimaPage}></Route>
      <Route path="*" Component={NotFound}></Route>
    </Routes>
  )
}

export default Routing
```

**追加方法**:
```tsx
// 新しいページを追加する場合
import YourNamePage from '../pages/YourNameTodo'

// Routes内に追加
<Route path="/yourname-todo" Component={YourNamePage}></Route>
```

---

## テンプレートファイル詳細仕様

### template-no-delete.tsx 完全仕様

#### ファイル概要
- **場所**: `dev-exercises/template-no-delete.tsx`
- **目的**: 削除機能なしの基本 Todo アプリテンプレート
- **学習目標**: 削除機能を自分で実装する

#### データ型定義
```typescript
// Todoアイテムの型定義
interface TodoItem {
  id: number              // 一意識別子 (タイムスタンプ使用)
  text: string            // タスクのテキスト内容
  completed: boolean      // 完了状態 (true/false)
  createdAt: Date         // 作成日時
}

// フィルタータイプの型定義
type FilterType = 'all' | 'active' | 'completed'
```

#### State管理
```typescript
// 状態変数の定義
const [todos, setTodos] = useState<TodoItem[]>([])        // Todoリスト
const [inputText, setInputText] = useState('')            // 入力テキスト
const [filter, setFilter] = useState<FilterType>('all')   // フィルター状態
```

#### LocalStorage連携
```typescript
// LocalStorageキー（個人ごとにカスタマイズ必要）
const STORAGE_KEY = 'your-name-todos'

// データ読み込み (初回マウント時)
useEffect(() => {
  const savedTodos = localStorage.getItem(STORAGE_KEY)
  if (savedTodos) {
    try {
      const parsedTodos = JSON.parse(savedTodos)
      setTodos(
        parsedTodos.map((todo: any) => ({
          ...todo,
          createdAt: new Date(todo.createdAt),
        }))
      )
    } catch (error) {
      console.error('Failed to load todos from localStorage:', error)
    }
  }
}, [])

// データ保存 (todos変更時に自動保存)
useEffect(() => {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
}, [todos])
```

#### 主要機能関数

##### 1. タスク追加機能
```typescript
const addTodo = () => {
  // 空文字チェック
  if (!inputText.trim()) return

  // 新規Todoオブジェクト生成
  const newTodo: TodoItem = {
    id: Date.now(),              // 現在のタイムスタンプをIDとして使用
    text: inputText.trim(),      // 前後の空白を削除
    completed: false,            // 初期状態は未完了
    createdAt: new Date(),       // 現在日時
  }

  // stateを更新 (不変性を保つため新しい配列を作成)
  setTodos((prev) => [...prev, newTodo])
  
  // 入力欄をクリア
  setInputText('')
}
```

##### 2. 完了状態切り替え機能
```typescript
const toggleTodo = (id: number) => {
  setTodos((prev) =>
    prev.map((todo) =>
      // IDが一致するTodoのcompletedを反転
      todo.id === id ? { ...todo, completed: !todo.completed } : todo
    )
  )
}
```

##### 3. フィルタリング機能
```typescript
const filteredTodos = todos.filter((todo) => {
  switch (filter) {
    case 'active':
      return !todo.completed      // 未完了のみ
    case 'completed':
      return todo.completed       // 完了済みのみ
    default:
      return true                 // すべて
  }
})
```

##### 4. 統計計算
```typescript
// 未完了タスク数
const activeCount = todos.filter((todo) => !todo.completed).length

// 完了済みタスク数
const completedCount = todos.filter((todo) => todo.completed).length
```

#### UI構造

##### 1. ページタイトル
```tsx
<h1>📝 【あなたの名前】のタスク管理</h1>
```
**カスタマイズ必要箇所**: 【あなたの名前】を実際の名前に変更

##### 2. タスク追加エリア
```tsx
<div style={{ marginBottom: '20px', display: 'flex', gap: '10px' }}
     onKeyDown={handleKeyPress}>
  <div style={{ flex: 1 }}>
    <Input.Text
      value={inputText}
      onChange={(e) => setInputText(e.target.value)}
      placeholder="新しいタスクを入力... (Enterで追加)"
    />
  </div>
  <Button.Middle onClick={addTodo}>➕ 追加</Button.Middle>
</div>
```

##### 3. フィルターボタン群
```tsx
<div style={{ marginBottom: '20px', display: 'flex', gap: '10px', alignItems: 'center' }}>
  <span>フィルター:</span>
  
  {/* すべて表示 */}
  <Button.Small onClick={() => setFilter('all')}>
    すべて ({todos.length})
  </Button.Small>
  
  {/* 進行中のみ */}
  <Button.Small onClick={() => setFilter('active')}>
    進行中 ({activeCount})
  </Button.Small>
  
  {/* 完了済みのみ */}
  <Button.Small onClick={() => setFilter('completed')}>
    完了済み ({completedCount})
  </Button.Small>
</div>
```

##### 4. タスクリスト
```tsx
<ul style={{ listStyle: 'none', padding: 0 }}>
  {filteredTodos.map((todo) => (
    <li key={todo.id} style={{
      display: 'flex',
      alignItems: 'center',
      padding: '12px',
      margin: '8px 0',
      border: '1px solid #ddd',
      borderRadius: '6px',
      backgroundColor: todo.completed ? '#f8f9fa' : '#fff',
    }}>
      {/* チェックボックス */}
      <input
        type="checkbox"
        checked={todo.completed}
        onChange={() => toggleTodo(todo.id)}
        style={{ marginRight: '12px', transform: 'scale(1.2)' }}
      />
      
      {/* タスクテキスト */}
      <span style={{
        flex: 1,
        textDecoration: todo.completed ? 'line-through' : 'none',
        color: todo.completed ? '#666' : '#000',
        fontSize: '16px',
      }}>
        {todo.text}
      </span>
      
      {/* 作成日時 */}
      <span style={{ fontSize: '12px', color: '#999', marginRight: '12px' }}>
        {todo.createdAt.toLocaleDateString()}
      </span>
      
      {/* ★ 削除ボタンはここに実装が必要 */}
    </li>
  ))}
</ul>
```

##### 5. 下部統計表示
```tsx
{todos.length > 0 && (
  <div style={{
    marginTop: '20px',
    padding: '15px',
    backgroundColor: '#f8f9fa',
    borderRadius: '6px',
    textAlign: 'center',
  }}>
    <span style={{ fontSize: '14px', color: '#666' }}>
      合計 {todos.length} 個のタスク、{activeCount} 個が未完了
    </span>
  </div>
)}
```

---

## アプリケーション作成手順

### ステップ1: テンプレートファイルのコピー

#### 1-1. ファイルコピー
```powershell
# PowerShellで実行
Copy-Item dev-exercises\template-no-delete.tsx src\pages\YourNameTodo.tsx

# 例: 山田さんの場合
Copy-Item dev-exercises\template-no-delete.tsx src\pages\YamadaTodo.tsx
```

#### 1-2. ファイル名規則
- **フォーマット**: `{名前}Todo.tsx`
- **例**:
  - `TanakaTodo.tsx` (田中さん)
  - `SuzukiTodo.tsx` (鈴木さん)
  - `YamadaTodo.tsx` (山田さん)

### ステップ2: ファイル内カスタマイズ

#### 2-1. コンポーネント名の変更
```tsx
// ❌ 変更前
export const YourNamePage: React.FC = () => {

// ✅ 変更後 (例: 山田さん)
export const YamadaPage: React.FC = () => {
```

#### 2-2. LocalStorageキーの変更
```tsx
// ❌ 変更前
const STORAGE_KEY = 'your-name-todos'

// ✅ 変更後 (例: 山田さん)
const STORAGE_KEY = 'yamada-todos'
```

#### 2-3. ページタイトルの変更
```tsx
// ❌ 変更前
<h1>📝 【あなたの名前】のタスク管理</h1>

// ✅ 変更後 (例: 山田さん)
<h1>📝 【山田】のタスク管理</h1>
```

### ステップ3: ルーティング設定

#### 3-1. routes/index.tsx にインポート追加
```tsx
// ファイル上部に追加
import YamadaPage from '../pages/YamadaTodo'
```

#### 3-2. Routes内にルート追加
```tsx
const Routing = () => {
  return (
    <Routes>
      {/* 既存のルート */}
      <Route path="/" Component={Pages.Top}></Route>
      
      {/* ★ 新しく追加 */}
      <Route path="/yamada-todo" Component={YamadaPage}></Route>
      
      {/* その他のルート */}
      <Route path="*" Component={NotFound}></Route>
    </Routes>
  )
}
```

### ステップ4: サイドバーリンク追加

#### 4-1. components/organisms/サイドバー.tsx を編集
```tsx
const サイドバー: React.FC = () => (
  <サイドバー_>
    <サイドバーLink label="ホーム" href="/" />
    <サイドバーLink label="Todo" href="/todos" />
    
    {/* ★ 新しく追加 */}
    <サイドバーLink label="📝 山田のタスク管理" href="/yamada-todo" />
  </サイドバー_>
)
```

### ステップ5: 動作確認

#### 5-1. 開発サーバー起動
```powershell
npm run dev
```

#### 5-2. ブラウザでアクセス
```
http://localhost:1234/yamada-todo
```

#### 5-3. 確認項目チェックリスト
- [ ] ページが正常に表示される
- [ ] タスク追加ができる
- [ ] チェックボックスで完了/未完了を切り替えられる
- [ ] フィルターが機能する
- [ ] ページをリロードしてもデータが保持される

---

## データ構造仕様

### TodoItem インターフェース詳細

```typescript
interface TodoItem {
  id: number              // 一意識別子
  text: string            // タスク内容
  completed: boolean      // 完了状態
  createdAt: Date         // 作成日時
}
```

#### フィールド詳細

##### id: number
- **目的**: 各Todoアイテムを一意に識別
- **生成方法**: `Date.now()` でミリ秒単位のタイムスタンプ
- **使用箇所**: 
  - React の `key` プロパティ
  - 削除・更新時の特定
- **例**: `1730908800000`

##### text: string
- **目的**: タスクの内容を格納
- **制約**: 
  - 空文字は不可 (`trim()` で検証)
  - 最大長制限なし (実装により追加可能)
- **使用箇所**: 
  - タスクリスト表示
  - 編集フォーム
- **例**: `"Reactを学習する"`

##### completed: boolean
- **目的**: タスクの完了状態を管理
- **デフォルト値**: `false` (新規作成時)
- **切り替え**: `toggleTodo()` 関数
- **使用箇所**:
  - UI スタイリング (取り消し線、背景色)
  - フィルタリング
- **例**: `true` or `false`

##### createdAt: Date
- **目的**: タスクの作成日時を記録
- **生成方法**: `new Date()`
- **保存形式**: 
  - LocalStorage: ISO文字列 (`toISOString()`)
  - State: Date オブジェクト
- **使用箇所**:
  - タスク一覧での日付表示
  - ソート機能 (実装可能)
- **例**: `2025-11-06T10:30:00.000Z`

### FilterType 型定義

```typescript
type FilterType = 'all' | 'active' | 'completed'
```

#### フィルター種別

##### 'all'
- **表示内容**: すべてのタスク
- **フィルター条件**: なし
- **カウント**: `todos.length`

##### 'active'
- **表示内容**: 未完了タスクのみ
- **フィルター条件**: `completed === false`
- **カウント**: `activeCount`

##### 'completed'
- **表示内容**: 完了済みタスクのみ
- **フィルター条件**: `completed === true`
- **カウント**: `completedCount`

### LocalStorage データ構造

#### 保存形式
```json
[
  {
    "id": 1730908800000,
    "text": "Reactを学習する",
    "completed": false,
    "createdAt": "2025-11-06T10:30:00.000Z"
  },
  {
    "id": 1730909400000,
    "text": "TypeScriptを理解する",
    "completed": true,
    "createdAt": "2025-11-06T11:00:00.000Z"
  }
]
```

#### ストレージキー
- **キー名**: `{your-name}-todos`
- **例**: 
  - `yamada-todos`
  - `tanaka-todos`
  - `suzuki-todos`

---

## UIコンポーネントライブラリ

### Button コンポーネント

#### 1. Button.Small
```tsx
<Button.Small onClick={() => handleClick()}>
  ボタンテキスト
</Button.Small>
```

**Props**:
- `onClick`: クリックハンドラー
- `disabled`: ボタンの無効化
- `classString`: 追加CSSクラス
- `tooltip`: ツールチップテキスト
- `href`: リンク先URL

**使用例**:
```tsx
<Button.Small onClick={() => setFilter('all')}>
  すべて ({todos.length})
</Button.Small>
```

#### 2. Button.Middle
```tsx
<Button.Middle onClick={addTodo}>
  ➕ 追加
</Button.Middle>
```

**特徴**: Button.Smallより大きいサイズ

#### 3. Button.Link
```tsx
<Button.Link href="/todos">
  Todo一覧へ
</Button.Link>
```

**特徴**: React Router の Link として動作

#### 4. Button.Icon
```tsx
<Button.Icon>
  <Icon name="menu" />
</Button.Icon>
```

**特徴**: アイコン専用ボタン

### Input コンポーネント

#### 1. Input.Text
```tsx
<Input.Text
  value={inputText}
  onChange={(e) => setInputText(e.target.value)}
  placeholder="テキストを入力..."
/>
```

**Props**:
- `value`: 入力値
- `onChange`: 変更ハンドラー
- `placeholder`: プレースホルダー
- `disabled`: 無効化
- `color`: カラーテーマ (`'uk-form-danger'`)
- `onKeyDown`: キーボードイベントハンドラー

#### 2. Input.Integer
```tsx
<Input.Integer
  value={count}
  onChange={(e) => setCount(parseInt(e.target.value))}
/>
```

**特徴**: 数値入力専用

#### 3. Input.TextArea
```tsx
<Input.TextArea
  value={description}
  onChange={(e) => setDescription(e.target.value)}
  placeholder="詳細を入力..."
/>
```

**特徴**: 複数行テキスト入力

### Text コンポーネント

#### 1. Text.Title
```tsx
<Text.Title>ページタイトル</Text.Title>
```

**用途**: ページタイトル

#### 2. Text.Large
```tsx
<Text.Large>大きなテキスト</Text.Large>
```

**用途**: 強調テキスト

#### 3. Text.Middle
```tsx
<Text.Middle>標準テキスト</Text.Middle>
```

**用途**: 通常のテキスト表示

### その他のコンポーネント

#### Icon
```tsx
<Icon name="check" />
<Icon name="trash" />
<Icon name="menu" />
```

**利用可能なアイコン**:
- `"check"`, `"trash"`, `"menu"`, `"home"`, `"user"`, `"settings"`, 等

#### Label
```tsx
<Label>フォームラベル</Label>
```

#### Divider
```tsx
<Divider.Horizontal />  {/* 水平線 */}
<Divider.Vertical />    {/* 垂直線 */}
<Divider.Simple />      {/* シンプルな区切り */}
```

---

## 状態管理仕様

### React Hooks の使用

#### useState - 状態管理
```typescript
// Todoリストの状態
const [todos, setTodos] = useState<TodoItem[]>([])

// 入力テキストの状態
const [inputText, setInputText] = useState('')

// フィルターの状態
const [filter, setFilter] = useState<FilterType>('all')
```

**更新パターン**:
```typescript
// 直接値を設定
setInputText('新しい値')

// 前の状態を使用して更新 (推奨)
setTodos(prev => [...prev, newTodo])
```

#### useEffect - 副作用管理

##### パターン1: 初回マウント時のみ実行
```typescript
useEffect(() => {
  // LocalStorageからデータ読み込み
  const savedTodos = localStorage.getItem(STORAGE_KEY)
  if (savedTodos) {
    setTodos(JSON.parse(savedTodos))
  }
}, [])  // 空の依存配列 → 初回のみ
```

##### パターン2: 特定の値が変更された時に実行
```typescript
useEffect(() => {
  // todosが変更されるたびにLocalStorageに保存
  localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
}, [todos])  // todosが変更されたら実行
```

### 状態更新の原則

#### 不変性の維持
```typescript
// ❌ 悪い例: 直接配列を変更
todos.push(newTodo)
setTodos(todos)

// ✅ 良い例: 新しい配列を作成
setTodos([...todos, newTodo])

// ✅ 良い例: map で新しい配列を作成
setTodos(todos.map(todo => 
  todo.id === id ? { ...todo, completed: !todo.completed } : todo
))
```

#### 関数型更新
```typescript
// ❌ 現在の状態に依存する場合は直接参照しない
setTodos([...todos, newTodo])

// ✅ 関数型更新を使用
setTodos(prev => [...prev, newTodo])
```

### LocalStorage 連携パターン

#### 保存
```typescript
// JSON形式で保存
localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
```

#### 読み込み
```typescript
const savedTodos = localStorage.getItem(STORAGE_KEY)
if (savedTodos) {
  try {
    const parsedTodos = JSON.parse(savedTodos)
    // Date型のフィールドを復元
    setTodos(parsedTodos.map(todo => ({
      ...todo,
      createdAt: new Date(todo.createdAt)
    })))
  } catch (error) {
    console.error('Failed to load todos:', error)
  }
}
```

#### 削除
```typescript
localStorage.removeItem(STORAGE_KEY)
```

---

## 機能実装ガイド

### 削除機能の実装 (学習課題)

#### 課題1: 個別タスク削除

##### 実装ステップ

**ステップ1: 削除関数の作成**
```typescript
// toggleTodo関数の後に追加
const deleteTodo = (id: number) => {
  setTodos((prev) => prev.filter((todo) => todo.id !== id))
}
```

**解説**:
- `filter`: 条件に一致する要素のみを含む新しい配列を返す
- `todo.id !== id`: IDが一致しない要素のみを残す
- 結果: 指定IDのTodoが削除された新しい配列

**ステップ2: UIに削除ボタンを追加**
```tsx
{/* タスクリストの各アイテムに追加 */}
<li key={todo.id} style={{...}}>
  <input type="checkbox" {...} />
  <span>{todo.text}</span>
  <span>{todo.createdAt.toLocaleDateString()}</span>
  
  {/* ★ ここに追加 */}
  <Button.Small onClick={() => deleteTodo(todo.id)}>
    🗑️
  </Button.Small>
</li>
```

**ステップ3: スタイル調整 (オプション)**
```tsx
<Button.Small 
  onClick={() => deleteTodo(todo.id)}
  classString="uk-button-danger"
>
  🗑️ 削除
</Button.Small>
```

#### 課題2: 完了タスクの一括削除

##### 実装ステップ

**ステップ1: 一括削除関数の作成**
```typescript
const clearCompleted = () => {
  setTodos((prev) => prev.filter((todo) => !todo.completed))
}
```

**解説**:
- `!todo.completed`: 未完了 (completed が false) のみを残す
- 結果: 完了済みタスクがすべて削除された新しい配列

**ステップ2: UIにクリアボタンを追加**
```tsx
{/* 下部統計エリア内に追加 */}
{todos.length > 0 && (
  <div style={{
    marginTop: '20px',
    padding: '15px',
    backgroundColor: '#f8f9fa',
    borderRadius: '6px',
    display: 'flex',
    justifyContent: 'space-between',
    alignItems: 'center',
  }}>
    <span style={{ fontSize: '14px', color: '#666' }}>
      合計 {todos.length} 個のタスク、{activeCount} 個が未完了
    </span>
    
    {/* ★ ここに追加 */}
    {completedCount > 0 && (
      <Button.Small onClick={clearCompleted}>
        完了済みをクリア ({completedCount})
      </Button.Small>
    )}
  </div>
)}
```

**ステップ3: 条件付き表示**
- `completedCount > 0` の場合のみボタンを表示
- 完了タスクがない場合はボタンを非表示

#### 動作確認チェックリスト
- [ ] 個別削除ボタンをクリックすると該当タスクが消える
- [ ] 削除後、すぐにUIに反映される
- [ ] 削除後、ページをリロードしても削除されたまま
- [ ] 完了タスククリアボタンが完了タスクがある時のみ表示される
- [ ] クリアボタンをクリックすると完了タスクがすべて消える
- [ ] 未完了タスクは削除されない

### 拡張機能のアイデア

#### 1. タスク編集機能
```typescript
const [editingId, setEditingId] = useState<number | null>(null)
const [editText, setEditText] = useState('')

const startEdit = (id: number, text: string) => {
  setEditingId(id)
  setEditText(text)
}

const saveEdit = (id: number) => {
  setTodos(prev => prev.map(todo =>
    todo.id === id ? { ...todo, text: editText } : todo
  ))
  setEditingId(null)
}
```

#### 2. タスク並び替え (ドラッグ&ドロップ)
```typescript
// react-beautiful-dnd ライブラリを使用
import { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'

const onDragEnd = (result) => {
  if (!result.destination) return
  
  const items = Array.from(todos)
  const [reorderedItem] = items.splice(result.source.index, 1)
  items.splice(result.destination.index, 0, reorderedItem)
  
  setTodos(items)
}
```

#### 3. 優先度設定
```typescript
interface TodoItem {
  id: number
  text: string
  completed: boolean
  createdAt: Date
  priority: 'high' | 'medium' | 'low'  // 追加
}

// 優先度で並び替え
const sortedTodos = [...todos].sort((a, b) => {
  const priorityOrder = { high: 0, medium: 1, low: 2 }
  return priorityOrder[a.priority] - priorityOrder[b.priority]
})
```

#### 4. 期限設定
```typescript
interface TodoItem {
  id: number
  text: string
  completed: boolean
  createdAt: Date
  dueDate?: Date  // 追加: オプショナル期限
}

// 期限切れチェック
const isOverdue = (dueDate?: Date) => {
  if (!dueDate) return false
  return new Date() > dueDate
}
```

#### 5. カテゴリ分類
```typescript
interface TodoItem {
  id: number
  text: string
  completed: boolean
  createdAt: Date
  category: 'work' | 'personal' | 'shopping' | 'other'  // 追加
}

// カテゴリでフィルタリング
const [categoryFilter, setCategoryFilter] = useState<string>('all')

const filteredByCategory = todos.filter(todo =>
  categoryFilter === 'all' || todo.category === categoryFilter
)
```

---

## トラブルシューティング

### よくあるエラーと解決方法

#### 1. ページが表示されない

**症状**:
```
Cannot GET /yamada-todo
```

**原因**:
- ルーティング設定が正しくない
- コンポーネントのインポートパスが間違っている

**解決方法**:
```tsx
// routes/index.tsx を確認
import YamadaPage from '../pages/YamadaTodo'  // パスが正しいか確認

<Route path="/yamada-todo" Component={YamadaPage}></Route>
```

#### 2. データが保存されない

**症状**:
- ページをリロードするとタスクが消える

**原因**:
- LocalStorage の保存処理が動作していない
- ストレージキーが重複している

**解決方法**:
```typescript
// useEffect の依存配列を確認
useEffect(() => {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(todos))
}, [todos])  // ★ [todos] が設定されているか確認

// ブラウザの開発者ツールで確認
// Application タブ → Local Storage → 該当ドメイン
// キーが存在するか、値が正しいか確認
```

#### 3. 削除ボタンが動作しない

**症状**:
- 削除ボタンをクリックしても何も起こらない

**原因**:
- onClick ハンドラーが正しく設定されていない
- 関数の引数が正しく渡されていない

**解決方法**:
```tsx
// ❌ 悪い例: 関数がすぐに実行される
<Button.Small onClick={deleteTodo(todo.id)}>

// ✅ 良い例: アロー関数でラップ
<Button.Small onClick={() => deleteTodo(todo.id)}>

// ✅ 良い例: bind を使用
<Button.Small onClick={deleteTodo.bind(null, todo.id)}>
```

#### 4. TypeScript エラー

**症状**:
```
Property 'completed' does not exist on type 'never'
```

**原因**:
- 型定義が正しくない
- ジェネリック型が指定されていない

**解決方法**:
```typescript
// ❌ 悪い例: 型指定なし
const [todos, setTodos] = useState([])

// ✅ 良い例: 型を明示
const [todos, setTodos] = useState<TodoItem[]>([])
```

#### 5. スタイルが適用されない

**症状**:
- UIkit のスタイルが反映されない

**原因**:
- UIkit のCSS/JSが読み込まれていない

**解決方法**:
```tsx
// main.tsx で確認
import UIkit from 'uikit'
import Icons from 'uikit/dist/js/uikit-icons'
import 'uikit/dist/css/uikit.min.css'  // ★ この行があるか確認

UIkit.use(Icons)  // ★ この行があるか確認
```

### デバッグ方法

#### Console.log デバッグ
```typescript
const addTodo = () => {
  console.log('addTodo called', inputText)  // 関数が呼ばれているか確認
  
  if (!inputText.trim()) {
    console.log('Input is empty')  // 条件分岐の確認
    return
  }

  const newTodo: TodoItem = {
    id: Date.now(),
    text: inputText.trim(),
    completed: false,
    createdAt: new Date(),
  }
  
  console.log('New todo:', newTodo)  // 生成されたオブジェクトの確認
  
  setTodos((prev) => {
    const updated = [...prev, newTodo]
    console.log('Updated todos:', updated)  // 更新後の配列の確認
    return updated
  })
}
```

#### React DevTools の使用
1. ブラウザ拡張機能 "React Developer Tools" をインストール
2. 開発者ツールで "Components" タブを開く
3. コンポーネントを選択して State を確認
4. State を手動で変更して動作確認

#### LocalStorage の確認
1. ブラウザの開発者ツールを開く (F12)
2. "Application" タブを選択
3. "Local Storage" → 該当ドメインを展開
4. ストレージキーと値を確認

---

## 付録

### A. プロジェクト実行コマンド

#### 開発環境起動
```powershell
# 依存関係インストール (初回のみ)
npm install

# 開発サーバー起動 (ポート 1234)
npm run dev

# APIサーバー起動 (ポート 3001)
node api-server.js
```

#### ビルドとデプロイ
```powershell
# プロダクションビルド
npm run build

# ビルド結果のプレビュー
npm run preview
```

#### コード品質管理
```powershell
# ESLint実行
npm run lint

# ESLint自動修正
npm run lint:fix

# Prettier実行
npm run format:write
```

### B. 参考リンク

#### 公式ドキュメント
- **React**: https://react.dev/
- **TypeScript**: https://www.typescriptlang.org/
- **Vite**: https://vitejs.dev/
- **React Router**: https://reactrouter.com/
- **UIkit**: https://getuikit.com/

#### 学習リソース
- **React チュートリアル**: https://react.dev/learn
- **TypeScript ハンドブック**: https://www.typescriptlang.org/docs/handbook/
- **JavaScript MDN**: https://developer.mozilla.org/ja/docs/Web/JavaScript

### C. バージョン情報

```
プロジェクト: training-trn-fp / Todo App
仕様書バージョン: 2.1
最終更新日: 2025年11月11日
対応テンプレート: template-no-delete.tsx (削除機能なし版)
テストカバレッジ: 100% (106 tests passed)
GitHub Pages: https://j1921604.github.io/ToDo/ (本番デプロイ済み)
```

---

## 🚀 ワンコマンド起動

### PowerShellスクリプトによる自動起動

プロジェクトには2種類の起動スクリプトが用意されています（**文字化け対処済み**）：

#### 1. start.ps1（自動終了版）

開発サーバーを起動し、ブラウザを開いた後、PowerShellウィンドウを自動で閉じます。

```powershell
.\start.ps1
```

**実行内容**:
1. UTF-8エンコーディングを設定（文字化け対処）
2. `node_modules` がなければ `npm install` を自動実行
3. 開発サーバーを起動 (`npm run dev`)
4. サーバーの起動を確認（最大30秒待機）
5. ブラウザで `http://localhost:1234` を自動的に開く
6. 5秒後にPowerShellウィンドウを自動終了

**停止方法**: タスクマネージャーで `node.exe` プロセスを終了

#### 2. start-simple.ps1（PowerShell自動終了版）

サーバーを起動してブラウザを開いた後、PowerShellウィンドウを自動で閉じます。

```powershell
.\start-simple.ps1
```

**実行内容**:
1. 依存関係のチェック
2. サーバーをバックグラウンドで起動
3. ブラウザで `http://localhost:1234` を開く
4. PowerShellウィンドウを自動的に閉じる

**停止方法**: タスクマネージャーで `node.exe` プロセスを終了

### 初回セットアップ

```powershell
# 1. プロジェクトディレクトリに移動
cd c:\Users\J1921604\spec-kit\ToDo

# 2. 依存関係をインストール
npm install

# 3. 起動スクリプトを実行
.\start.ps1
```

---

## 🧪 テスト仕様

### テストカバレッジ: 100%

本プロジェクトは**完全なテストカバレッジ**を達成しています。

#### テスト統計
- **合計テストファイル**: 17ファイル
- **合計テストケース**: 106テスト
- **成功率**: 100% (106/106 passed)
- **テスト時間**: 約10-12秒

#### テストカテゴリ

**単体テスト (Unit Tests)**:
- `tests/unit/types/todo.test.ts` - Todo型定義とユーティリティ関数 (17tests)
- `tests/unit/utils/localStorage.test.ts` - LocalStorage操作 (9 tests)
- `tests/unit/utils/performance.test.ts` - パフォーマンス計測 (6 tests)
- `tests/unit/components/` - React コンポーネント (31 tests)
- `tests/unit/config/userPages.test.ts` - ユーザーページ管理 (12 tests)

**統合テスト (Integration Tests)**:
- `tests/integration/task-operations.test.tsx` - タスク操作 (6 tests)
- `tests/integration/task-filtering.test.tsx` - フィルタリング (4 tests)
- `tests/integration/task-deletion.test.tsx` - 削除機能 (3 tests)
- `tests/integration/bulk-deletion.test.tsx` - 一括削除 (3 tests)
- `tests/integration/data-persistence.test.tsx` - データ永続化 (4 tests)
- `tests/integration/edge-cases.test.tsx` - エッジケース (7 tests)
- `tests/integration/personal-page-setup.test.tsx` - ページセットアップ (3 tests)

#### テスト実行コマンド

```powershell
# 全テストを実行
npm test

# テストをウォッチモードで実行
npm run test:watch

# カバレッジレポートを生成
npm run test:coverage
```

#### テスト結果サンプル

```
 Test Files  17 passed (17)
      Tests  106 passed (106)
   Duration  10.99s
```

---

## 📦 GitHub Pages デプロイ

### ✅ 本番デプロイ完了

**公開URL**: https://j1921604.github.io/ToDo/

このアプリケーションは既にGitHub Pagesにデプロイされ、本番環境で動作しています。

### 既に実装済みの設定

**1. vite.config.ts の修正済み**

```typescript
export default defineConfig({
  base: '/ToDo/',  // ✅ 設定済み
  plugins: [react()],
  server: {
    port: 1234
  }
})
```

**2. main.tsx の修正済み**

```typescript
ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter basename="/ToDo/">  {/* ✅ 設定済み */}
      <App />
    </BrowserRouter>
  </React.StrictMode>
)
```

### 再デプロイ手順

詳細な手順は `GitHubPagesデプロイ手順.md` を参照してください。

**デプロイ実行**:

```powershell
# gh-pagesパッケージをインストール（初回のみ）
npm install --save-dev gh-pages

# ビルドしてデプロイ
npm run deploy
```

### 動作確認

デプロイ後、以下のURLでアプリケーションにアクセス可能:

```
https://j1921604.github.io/ToDo/
```

---

## 🏗️ プロジェクト憲法

このプロジェクトは厳格な開発憲法に従っています。

### 憲法の核心原則

**I. Test-First Development (NON-NEGOTIABLE)**
- テストカバレッジ100%必須
- TDD: テスト作成 → 実装 → リファクタリング
- テストなしのコード実装は絶対禁止

**II. Component-First Architecture**
- すべての機能は独立したReactコンポーネント
- Atomic Design原則
- 再利用可能性を重視

**III. Type Safety (TypeScript 100%)**
- すべてのコードはTypeScript
- `any`型の使用禁止
- 完全な型定義

**IV. Documentation & Reproducibility**
- 他のAIが完璧に再現できる詳細仕様書
- すべての機能、API、ファイル構成を文書化

**V. Data Persistence & State Management**
- LocalStorageの一貫性
- 日本語文字対応
- 完全なデータクリーンアップ

詳細は `.specify/memory/constitution.md` を参照。

---

## 📁 完全なファイル構造

```
ToDo/
├── .github/
│   └── prompts/
│       └── speckit.constitution.prompt.md
├── .specify/
│   └── memory/
│       └── constitution.md
├── database/
├── node_modules/
├── public/
│   ├── test-japanese-page.html
│   └── test-page-deletion.html
├── specs/
│   ├── 001-todo-app/
│   │   ├── spec.md
│   │   └── checklists/
│   │       └── requirements.md
│   └── feature/
│       └── impl-001-todo-app/
│           ├── contracts/
│           │   └── types.md
│           ├── data-model.md
│           ├── plan.md
│           ├── quickstart.md
│           ├── research.md
│           └── tasks.md
├── src/
│   ├── components/
│   │   ├── atoms/
│   │   │   ├── Button/
│   │   │   │   ├── index.tsx
│   │   │   │   ├── Middle.tsx
│   │   │   │   └── Small.tsx
│   │   │   └── Input/
│   │   │       ├── index.tsx
│   │   │       └── Text.tsx
│   │   └── organisms/
│   │       └── Sidebar.tsx
│   ├── config/
│   │   └── userPages.ts
│   ├── pages/
│   │   ├── DynamicTodoPage.tsx
│   │   ├── HomePage.tsx
│   │   └── TestUserTodo.tsx
│   ├── types/
│   │   └── todo.ts
│   ├── utils/
│   │   ├── localStorage.ts
│   │   └── performance.ts
│   ├── App.tsx
│   └── main.tsx
├── tests/
│   ├── integration/
│   │   ├── bulk-deletion.test.tsx
│   │   ├── data-persistence.test.tsx
│   │   ├── edge-cases.test.tsx
│   │   ├── personal-page-setup.test.tsx
│   │   ├── task-deletion.test.tsx
│   │   ├── task-filtering.test.tsx
│   │   └── task-operations.test.tsx
│   ├── unit/
│   │   ├── components/
│   │   │   ├── App.test.tsx
│   │   │   ├── DynamicTodoPage.test.tsx
│   │   │   ├── HomePage.test.tsx
│   │   │   ├── Sidebar.test.tsx
│   │   │   ├── TaskInput.test.tsx
│   │   │   └── TaskItem.test.tsx
│   │   ├── config/
│   │   │   └── userPages.test.ts
│   │   ├── types/
│   │   │   └── todo.test.ts
│   │   └── utils/
│   │       ├── localStorage.test.ts
│   │       └── performance.test.ts
│   └── setup.ts
├── 仕様書/
│   ├── BASIC_TODO_GUIDE_JP.md
│   ├── React開発研修.md
│   ├── SPECIFY.png
│   ├── template-no-delete.tsx
│   ├── Todo画面.png
│   └── 仕様書.md (このファイル)
├── .gitignore
├── index.html
├── package.json
├── package-lock.json
├── PAGE_DELETION_FIX.md
├── README.md
├── start.ps1
├── start-simple.ps1
├── test-japanese-page.html
├── test-japanese-page.js
├── tsconfig.json
├── tsconfig.node.json
├── vite.config.ts
└── vitest.config.ts
```

---

## 🔧 API仕様

### generateStorageKey()

**目的**: ページ名からLocalStorageキーを生成

**シグネチャ**:
```typescript
function generateStorageKey(developerName: string): StorageKey
```

**仕様**:
- 日本語文字をそのまま保持
- スペースをハイフンに変換
- 空の名前はエラー

**例**:
```typescript
generateStorageKey('浜崎秀寿')      // => '浜崎秀寿-todos'
generateStorageKey('浜崎 秀寿')     // => '浜崎-秀寿-todos'
generateStorageKey('TestUser')      // => 'TestUser-todos'
generateStorageKey('Test@User#123') // => 'Test@User#123-todos'
```

### addUserPage()

**目的**: 新しいユーザーページを追加

**シグネチャ**:
```typescript
function addUserPage(name: string, icon: string = '📝'): boolean
```

**仕様**:
- 空の名前は拒否 (`return false`)
- 重複する名前は拒否
- LocalStorageに保存
- カスタムイベント `userPagesUpdated` を発火

### removeUserPage()

**目的**: ユーザーページを削除

**シグネチャ**:
```typescript
function removeUserPage(name: string): boolean
```

**仕様**:
- ページ情報を削除
- **タスクデータ（LocalStorage）も完全に削除**
- ページ情報ファイルも削除
- 存在しないページは `false` を返す

**削除されるデータ**:
1. `userPages` 配列からページ削除
2. `localStorage['{name}-todos']` のタスクデータ
3. `localStorage['page-info-{name}']` のページ情報

---

## まとめ

この仕様書では、`template-no-delete.tsx` をベースにした Todo アプリケーションの作成方法を**完全に**解説しました。

### 🎯 達成状況

✅ **テストカバレッジ100%** - 106テストすべて成功  
✅ **憲法100%遵守** - Test-First, Type Safety, Documentation  
✅ **ワンコマンド起動** - `start.ps1` / `start-simple.ps1`  
✅ **日本語完全対応** - ページ名、タスク名、UI  
✅ **完全なデータクリーンアップ** - ページ削除時のタスクデータ削除  
✅ **GitHub Pages対応** - デプロイ手順完備  

### 学習の流れ

1. **基本理解**: プロジェクト構造と技術スタックを理解する
2. **テンプレート活用**: template-no-delete.tsx をコピーしてカスタマイズ
3. **機能実装**: 削除機能などを自分で実装する
4. **テスト実装**: TDDサイクルでテストを書く
5. **拡張**: 編集、優先度、期限などの機能を追加する

### 次のステップ

- バックエンドAPI連携 (`/todos` エンドポイント)
- データベース連携 (SQLite)
- 認証機能の追加 (Azure MSAL)
- UI/UXの改善
- GitHub Pagesへのデプロイ

この仕様書を参考に、実践的な React アプリケーション開発のスキルを身につけてください！

---

**📝 質問・フィードバック**

この仕様書についての質問や改善提案があれば、プロジェクトチームにお問い合わせください。

**ドキュメント更新履歴**:
- 2025-11-11: v2.1 - GitHub Pages本番デプロイ完了、起動スクリプトUTF-8対応、README.md完全更新
- 2025-11-07: v2.0 - テスト100%完了、ワンコマンドスクリプト、GitHub Pages対応追加
- 2025-11-06: v1.0 - 初版作成

